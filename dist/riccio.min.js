!function(){"use strict";function e(e,t){var i;for(i in t)e.hasOwnProperty(i)&&(e[i]=t[i]);return e}function t(e){var t=getComputedStyle(e,":before"),i=t.getPropertyValue("content");return"none"===i?1:i.slice(1,-1)}function i(e,t){for(var i,o;t--;)i=document.createElement("div"),o=document.createElement("div"),i.classList.add("riccio__row-item"),o.classList.add("riccio__row-pop"),e.appendChild(i),e.appendChild(o);return e}function o(e,t){for(t*=2;t--;)e.removeChild(e.lastChild);return e}function r(e,t){e.classList.contains("riccio__item--active")?e.classList.remove("riccio__item--active"):(t&&t.classList.remove("riccio__item--active"),e.classList.add("riccio__item--active"))}function c(e,t){e.classList.contains("riccio__pop--active")?e.classList.remove("riccio__pop--active"):(t&&t.classList.remove("riccio__pop--active"),e.classList.add("riccio__pop--active"))}function n(e,t){e!=prev_row&&(prev_row.classList.remove("riccio__row-pop--active"),e.classList.add("riccio__row-pop--active"))}function s(e,t){for(var i=!1;e!=t;){if(e.hasAttribute("data-riccio"))return e.getAttribute("data-riccio");e=e.parentElement}return i}function l(){for(var e=[],t=document.styleSheets,i=t.length,o=0,r=0;i--;){try{o=t[i].cssRules}catch(c){o=0}for(r=o?o.length:0;r--;)o[r].constructor===CSSMediaRule&&e.push(window.matchMedia(o[r].media.mediaText))}return e}function a(e){e.element.addEventListener("click",function(t){var i=s(t.target,t.currentTarget);i&&e.toggle(i)})}function p(e,i){function o(i){var o=t(e.element);e.options.per_row!=o&&(e.options.per_row=o,e.init())}for(var r=i.length;r--;)i[r].addListener(o)}var d=window.console;window.Riccio=function(i,o){if(i.nodeType!=Node.ELEMENT_NODE)return void(d&&d.error("Riccio: the given element is not valid.",i));this.element=i;var r={item_selector:"",pop_selector:"",per_row:1};arguments[1]&&"object"==typeof arguments&&(this.options=e(r,arguments[1])),this.options.per_row=t(this.element);var c=this.element.querySelectorAll(this.options.item_selector),n=this.element.querySelectorAll(this.options.pop_selector);if(c.length!=n.length)return void(d&&d.error("Riccio: items number and pops number doesn't match."));this.item_store=c,this.pop_store=n,this.init(),a(this);var s=l();s.length&&p(this,s)},Riccio.prototype.init=function(){this.element.classList.add("riccio");var e=document.createDocumentFragment(),t=this.element.querySelectorAll(this.options.item_selector),r=t.length,c=this.needs(r),n=c.needed-c.having;if(c.having)for(var s=this.element.querySelectorAll(".riccio__row-item, .riccio__row-pop"),l=s.length,a=0;l>a;a++)e.appendChild(s[a]);n&&(-1===Math.sign(n)?(n*=-1,e=o(e,n)):e=i(e,n)),e=this.addAll(e),this.element.appendChild(e)},Riccio.prototype.needs=function(e){return{having:this.element.querySelectorAll(".riccio__row-item").length,needed:Math.ceil(e/this.options.per_row)}},Riccio.prototype.addAll=function(e){for(var t=e.querySelectorAll(".riccio__row-item"),i=e.querySelectorAll(".riccio__row-pop"),o=this.element.querySelectorAll(this.options.item_selector),r=this.element.querySelectorAll(this.options.pop_selector),c=o.length,n=0,s=0;c>n;){o[n].setAttribute("data-riccio",n),o[n].classList.add("riccio__item"),r[n].classList.add("riccio__pop"),t[s].appendChild(o[n]),i[s].appendChild(r[n]),n++;var l=n%this.options.per_row;l||s++}return e},Riccio.prototype.toggle=function(e){var t=this.element.querySelector(".riccio__pop--active"),i=this.element.querySelector(".riccio__item--active"),o=this.element.querySelector(".riccio__row-pop--active");r(this.item_store[e],i),c(this.pop_store[e],t),n(this.pop_store[e].parentElement,o)}}();