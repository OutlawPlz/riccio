!function(){"use strict";function e(e,t){var i;for(i in t)e.hasOwnProperty(i)&&(e[i]=t[i]);return e}function t(e){var t=getComputedStyle(e,":before"),i=t.getPropertyValue("content");return"none"===i?1:parseInt(i.slice(1,-1),10)}function i(e,t){for(var i,o;t--;)i=document.createElement("div"),o=document.createElement("div"),i.classList.add("riccio__row-item"),o.classList.add("riccio__row-pop"),e.appendChild(i),e.appendChild(o);return e}function o(e,t){for(t*=2;t--;)e.removeChild(e.lastChild);return e}function r(e,t){e.classList.contains("riccio__item--active")?e.classList.remove("riccio__item--active"):(t&&t.classList.remove("riccio__item--active"),e.classList.add("riccio__item--active"))}function c(e,t){e.classList.contains("riccio__pop--active")?e.classList.remove("riccio__pop--active"):(t&&t.classList.remove("riccio__pop--active"),e.classList.add("riccio__pop--active"))}function n(e,t){e!=t&&(t.classList.remove("riccio__row-pop--active"),e.classList.add("riccio__row-pop--active"))}function s(e,t){for(var i=!1;e!=t;){if(e.hasAttribute("data-riccio"))return e.getAttribute("data-riccio");e=e.parentElement}return i}function a(){for(var e=[],t=document.styleSheets,i=t.length,o=0,r=0;i--;){try{o=t[i].cssRules}catch(c){o=0}for(r=o?o.length:0;r--;)o[r].constructor===CSSMediaRule&&e.push(window.matchMedia(o[r].media.mediaText))}return e=l(e)}function l(e){for(var t={},i=[],o=e.length;o--;)"undefined"==typeof t[e[o].media]&&i.push(e[o]),t[e[o].media]=0;return i}function p(e){e.element.addEventListener("click",function(t){var i=s(t.target,t.currentTarget);i&&e.toggle(i)})}function d(e,i){function o(){var i=t(e.element);e.options.per_row!=i&&(e.options.per_row=i,e.init())}var r=i.length;if(_){for(;r--;)i[r].addListener(o);_=!1}}var h=window.console,_=!0;window.Riccio=function(i,o){if(i.nodeType!=Node.ELEMENT_NODE)return void(h&&h.error("Riccio: the given element is not valid.",i));this.element=i;var r={item_selector:"",pop_selector:"",per_row:1};arguments[1]&&"object"==typeof arguments&&(this.options=e(r,arguments[1])),this.options.per_row=t(this.element);var c=this.element.querySelectorAll(this.options.item_selector),n=this.element.querySelectorAll(this.options.pop_selector);if(c.length!=n.length)return void(h&&h.error("Riccio: items number and pops number doesn't match."));if(this.item_store=c,this.pop_store=n,this.init(),p(this),_){var s=a();s.length&&d(this,s)}},Riccio.prototype.init=function(){this.element.classList.add("riccio");var e=document.createDocumentFragment(),t=this.element.querySelectorAll(this.options.item_selector),r=t.length,c=this.needs(r),n=c.needed-c.having;if(c.having)for(var s=this.element.querySelectorAll(".riccio__row-item, .riccio__row-pop"),a=s.length,l=0;a>l;l++)e.appendChild(s[l]);n&&(-1===Math.sign(n)?(n*=-1,e=o(e,n)):e=i(e,n)),e=this.addAll(e),this.element.appendChild(e)},Riccio.prototype.needs=function(e){return{having:this.element.querySelectorAll(".riccio__row-item").length,needed:Math.ceil(e/this.options.per_row)}},Riccio.prototype.addAll=function(e){for(var t=e.querySelectorAll(".riccio__row-item"),i=e.querySelectorAll(".riccio__row-pop"),o=this.item_store.length,r=0,c=0;o>r;){this.item_store[r].setAttribute("data-riccio",r),this.item_store[r].classList.add("riccio__item"),this.pop_store[r].classList.add("riccio__pop"),t[c].appendChild(this.item_store[r]),i[c].appendChild(this.pop_store[r]),r++;var n=r%this.options.per_row;n||c++}return e},Riccio.prototype.toggle=function(e){var t=this.element.querySelector(".riccio__pop--active"),i=this.element.querySelector(".riccio__item--active"),o=this.element.querySelector(".riccio__row-pop--active");r(this.item_store[e],i),c(this.pop_store[e],t),n(this.pop_store[e].parentElement,o)}}();