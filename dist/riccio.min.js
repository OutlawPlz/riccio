!function(){"use strict";function e(e,t){var i;for(i in t)e.hasOwnProperty(i)&&(e[i]=t[i]);return e}function t(e){var t=getComputedStyle(e,":before"),i=t.getPropertyValue("content");return"none"===i?1:i.slice(1,-1)}function i(e,t){t*=2;for(var i;t--;)i=document.createElement("div"),i.classList.add("riccio__row"),e.appendChild(i);return e}function o(e,t){for(t*=2;t--;)e.removeChild(e.lastChild);return e}function r(e,t){for(var i=!1,o=e;o!=t;){if(o.hasAttribute("data-riccio")){i=o.getAttribute("data-riccio");break}o=o.parentElement}return i}function n(){for(var e=[],t=document.styleSheets,i=t.length,o=0,r=0;i--;){try{o=t[i].cssRules}catch(n){o=0}for(r=o?o.length:0;r--;)o[r].constructor===CSSMediaRule&&e.push(window.matchMedia(o[r].media.mediaText))}return e}function c(e){e.element.addEventListener("click",function(t){var i=r(t.target,t.currentTarget);i&&e.toggle(e.pop_store[i])})}function l(e,i){function o(i){var o=t(e.element);e.options.per_row!=o&&(e.options.per_row=o,e.init())}for(var r=i.length;r--;)i[r].addListener(o)}var s=window.console;window.Riccio=function(i,o){if(i.nodeType!=Node.ELEMENT_NODE)return void(s&&s.error("Riccio: the given element is not valid.",i));this.element=i;var r={item_selector:"",pop_selector:"",per_row:1};arguments[1]&&"object"==typeof arguments&&(this.options=e(r,arguments[1])),this.options.per_row=t(this.element);var a=this.element.querySelectorAll(this.options.item_selector),p=this.element.querySelectorAll(this.options.pop_selector);if(a.length!=p.length)return void(s&&s.error("Riccio: items number and pops number doesn't match."));this.item_store=a,this.pop_store=p,this.init(),c(this);var h=n();h.length&&l(this,h)},Riccio.prototype.init=function(){this.element.classList.add("riccio");var e=document.createDocumentFragment(),t=this.element.querySelectorAll(this.options.item_selector),r=t.length,n=this.needs(r),c=n.needed-n.having;if(n.having)for(var l=this.element.querySelectorAll(".riccio__row"),s=l.length,a=0;s>a;a++)e.appendChild(l[a]);c&&(-1===Math.sign(c)?(c*=-1,e=o(e,c)):e=i(e,c)),e=this.addAll(e),this.element.appendChild(e)},Riccio.prototype.needs=function(e){return{having:this.element.querySelectorAll("riccio__row").length/2,needed:Math.ceil(e/this.options.per_row)}},Riccio.prototype.addAll=function(e){for(var t=e.querySelectorAll(".riccio__row:nth-child(odd)"),i=e.querySelectorAll(".riccio__row:nth-child(even)"),o=this.element.querySelectorAll(this.options.item_selector),r=this.element.querySelectorAll(this.options.pop_selector),n=o.length,c=0,l=0;n>c;){o[c].setAttribute("data-riccio",c),o[c].classList.add("riccio__item"),r[c].classList.add("riccio__pop"),t[l].appendChild(o[c]),i[l].appendChild(r[c]),c++;var s=c%this.options.per_row;s||l++}return e},Riccio.prototype.open=function(e){e.classList.add("riccio__pop--active")},Riccio.prototype.close=function(e){e.classList.remove("riccio__pop--active")},Riccio.prototype.toggle=function(e){var t=this.element.querySelectorAll(".riccio__pop--active"),i=t.length;if(e.classList.contains("riccio__pop--active"))for(;i--;)this.close(t[i]);else{for(;i--;)this.close(t[i]);this.open(e)}}}();